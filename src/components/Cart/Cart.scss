.cart-page {
  padding: 16px;
  min-height: 100vh;
  background: #F3F1E2;

  .title {
    font-size: 26px;
    font-weight: 700;
    text-align: center;
    color: #2c1632;
    margin: 8px 0 16px;
  }

  /* GRID */
  .cart-grid {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-areas:
      "list"
      "summary"
      "form"
      "delivery";
    gap: 20px;

    @media (min-width: 768px) {
      grid-template-columns: minmax(0, 1fr) 360px;
      grid-template-areas:
        "list    summary"
        "form    summary"
        "delivery summary";
      align-items: start;
      column-gap: 28px;
    }

    @media (min-width: 1200px) {
      grid-template-columns: minmax(0, 1fr) 420px;
      column-gap: 36px;
    }
  }

  .cart-list { grid-area: list; display: flex; flex-direction: column; gap: 12px; }
  .cart-summary-wrap { grid-area: summary; position: relative; }
  .checkout-form   { grid-area: form; }
  .delivery-section{ grid-area: delivery; }

  /* Итог */
  .summary-card {
    position: static;
    background: #fff;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 2px 10px rgba(0,0,0,.06);

    @media (min-width: 768px) {
      position: sticky;
      top: 16px;
    }
  }

  .summary-card--compact {
    background: #F3F1E2;
    border: none;
    border-radius: 0;
    box-shadow: none;
    padding: 14px 0;
    border-top: 1px solid #d8d3c5;

    .summary-accordion,
    .pay-btn,
    .policy,
    .agree,
    .summary-split { display: none !important; }

    .summary-line{
      display:flex; justify-content:space-between; align-items:center;
      font-size:13px; color:#9a94a2; margin-bottom:8px; padding: 0 16px;
    }
    .summary-total{
      display:flex; justify-content:space-between; align-items:center;
      font-weight:700; color:#2c1632; padding: 0 16px;
    }
    .summary-total--mobile{ font-size:18px; @media (min-width:380px){ font-size:20px; } }
  }

  /* ===== КАСТОМНЫЙ АККОРДЕОН (общий для мобилы и десктопа) ===== */
  .exp-list {
    display: block;
    margin: 8px 0 10px;
  }
  .exp-list--mobile { margin-top: 30px; margin-bottom: 30px;} /* отступ от чекбокса */
  .exp-item {
    border-top: 1px solid #d8d3c5; /* разделительная линия */

    &:last-child { border-bottom: 1px solid #d8d3c5; }
  }
  .exp-btn {
    width: 100%;
    padding: 14px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: transparent;
    border: 0;
    cursor: pointer;
    color: #3a203e;
    font-weight: 600;
    text-align: left;
  }
  .exp-title { pointer-events: none; font-size: 18px;}

  /* плюс/минус */
  .acc-plus {
    position: relative;
    width: 16px; height: 16px; flex: 0 0 16px;
  }
  .acc-plus::after,
  .acc-plus::before {
    content: "";
    position: absolute;
    left: 0; right: 0;
    margin: auto;
    background: #2c1632;
    transition: transform .18s ease, opacity .18s ease;
  }
  .acc-plus::after { top: 7px; height: 2px; width: 16px; } /* горизонтальная */
  .acc-plus::before { top: 0; bottom: 0; width: 2px; height: 16px; } /* вертикальная */
  .acc-plus.open::before { opacity: 0; } /* превращаем + в – */

  .exp-panel {
    padding: 8px 0 14px;
    color: #6b6570;
    font-size: 14px;
    line-height: 1.5;
  }

  /* анимация раскрытия */
  .exp-enter-from, .exp-leave-to { opacity: 0; transform: translateY(-4px); }
  .exp-enter-active, .exp-leave-active { transition: all .18s ease; }

  /* Линия, суммы и кнопка */
  .summary-split{ height:1px; background:#e9e2d2; margin:12px 0; }
  .summary-line{ display:flex; justify-content:space-between; font-size:14px; color:#6b6570; }
  .summary-total{ display:flex; justify-content:space-between; align-items:center;
    margin-top:12px; padding-top:8px; border-top:1px solid #e9e2d2;
    font-size:16px; font-weight:700; color:#2c1632; }

  .pay-btn{
    margin-top:16px;
    margin-bottom:16px;
    width:100%; height:44px; border-radius:10px; border:0;
    background:#2c1632; color:#fff; font-weight:600; cursor:pointer;
    transition: opacity .2s ease, background .2s ease;
    &:hover:not(:disabled){ opacity:.92; }
    &:disabled{ background:#a497a9; cursor:not-allowed; opacity:.7; }
  }

  .policy{
    margin-bottom:12px;
    font-size:14px; line-height:1.45; color:#6B6570;
    a{ color:#2c1632; text-decoration: underline; }
  }

  .agree{
    display:flex; align-items:center; gap:10px; margin-top:8px;
    font-size:14px; line-height:1.35; color:#3A203E;

    input[type="checkbox"]{
      -webkit-appearance:none; appearance:none;
      width:18px; height:18px; border-radius:3px;
      border:1.5px solid #2c1632; background:#F3F1E2;
      display:inline-grid; place-content:center; cursor:pointer; outline:none;
    }
    input[type="checkbox"]::after{
      content:""; width:12px; height:12px;
      background:url("data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 13l4 4L19 7' fill='none' stroke='%232c1632' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center/contain;
      opacity:0; transition:opacity .15s ease;
    }
    input[type="checkbox"]:checked::after{ opacity:1; }

    a{ color:#2c1632; text-decoration: underline; }
  }

  @media (max-width: 360px){
    .policy{ font-size:13.5px; }
    .agree { font-size:13.5px; }
  }

  /* форма */
  .checkout-form{
    background:transparent; border-radius:0; padding:0; margin-top:8px;
    .form-title{ font-size:28px; line-height:1.2; font-weight:700; color:#2c1632; margin:0 0 20px; }
    .form-grid{ display:grid; grid-template-columns:1fr; column-gap:40px; row-gap:22px;
      @media (min-width:900px){ grid-template-columns:1fr 1fr; } }
    .form-field{ display:grid; gap:6px; label{ font-size:16px; color:#3a203e; } }
  }

  .line-input{
    height:38px; padding:0; border:0; border-bottom:1px solid #bfb8a9; border-radius:0;
    background:transparent; color:#2c1632; font-size:16px; outline:none;
    transition:border-color .18s ease;
    &:focus{ border-bottom-color:#2c1632; }
    &::placeholder{ color:transparent; }
    &.is-error{ border-bottom-color:#c0392b; }
  }

  @media (min-width:900px){
    .line-input{ height:42px; font-size:17px; }
    .checkout-form .form-title{ font-size:34px; margin-bottom:24px; }
  }

  .delivery-section{
    margin-top:24px;
    .delivery-title{ font-size:20px; font-weight:700; color:#2c1632; margin:0 0 14px; }
    .delivery-method{ display:flex; align-items:center; gap:14px; margin-bottom:12px;
      .label{ color:#6b6570; }
      .radio{ display:inline-flex; align-items:center; gap:8px; input{ accent-color:#2c1632; } } }
    .delivery-map{ width:100%; height:240px; border-radius:10px; overflow:hidden; background:#eee; }
    .pvz{ margin-top:8px; font-size:13px; color:#666; }
  }
}

/* анимации (старые для slide и новые для exp) */
.slide-enter-active, .slide-leave-active { transition: all .2s ease; }
.slide-enter-from, .slide-leave-to { opacity: 0; transform: translateY(-6px); }

.exp-enter-from, .exp-leave-to { opacity: 0; transform: translateY(-4px); }
.exp-enter-active, .exp-leave-active { transition: all .18s ease; }
